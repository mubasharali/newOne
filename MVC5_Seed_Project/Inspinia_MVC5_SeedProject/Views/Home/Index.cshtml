
<div class="row wrapper border-bottom white-bg page-heading">
    <br /> <br /><br />
    <div class="col-sm-12">
        <p>&nbsp</p>
        <div class="control-group form-horizontal">
            <label class="control-label col-sm-5" for="select-repo">What are you looking for </label>
            <div id="FirstLoading" style="display:none" data-bind="visible:!isPageLoading()">
                <div class="col-sm-5 col-md-4">
                    <input id="select-tag" name="tags" data-bind="value:selectedTag" class="repositories" placeholder="e.g, Samsung S3, ups, House for sale.." />
                </div>
            </div>
            <div data-bind="visible:isPageLoading()">
                <div class="sk-spinner sk-spinner-wave">
                    <div class="sk-rect1"></div>
                    <div class="sk-rect2"></div>
                    <div class="sk-rect3"></div>
                    <div class="sk-rect4"></div>
                    <div class="sk-rect5"></div>
                </div>
            </div>
        </div>
        <p>&nbsp</p>
       
        </div>

    <div class="col-sm-12">

        
        <br />
        
        <div class="col-xs-12"><br /><br />
<br />
            <div class="row">
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/MobilesTablets">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-mobile fa-4x"></i>
                                <h3 class="m-xs">Mobiles</h3>
                                <p>&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/RealEstate">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-home fa-4x"></i>
                                <h3 class="m-xs">Real Estate</h3>
                                <p>&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Jobs">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-suitcase fa-4x"></i>
                                <h3 class="m-xs">Jobs</h3>
                                <p>&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Services">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-cogs fa-4x"></i>
                                <h3 class="m-xs">Services</h3>
                                <p>&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Pets-Animals">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-paw fa-4x"></i>
                                <h3 class="m-xs">Pets & Animals</h3>
                                <p>&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/books-sports-hobbies">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-mortar-board fa-4x"></i>
                                <h3 class="m-xs">Books, Sports & Hobbies</h3>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Cameras">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-camera fa-4x"></i>
                                <h3 class="m-xs">Camera</h3>
                                <p class="visible-lg">&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Games">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-gamepad fa-4x"></i>
                                <h3 class="m-xs">Games</h3>
                                <p  class="visible-lg">&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Laptops-Computers">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-laptop fa-4x"></i>
                                <h3 class="m-xs">Laptops-Computers</h3>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/TV-DVD-Multimedia">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-play fa-4x"></i>
                                <h3 class="m-xs">TV-DVD-Multimedia</h3>
                            </div>
                        </div>
                    </a>
                </div>
                
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Home-Appliances">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-television fa-4x"></i>
                                <h3 class="m-xs">Home Appliances</h3>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Other-Electronics">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-bolt fa-4x"></i>
                                <h3 class="m-xs">Other Electronics</h3>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Cars">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-car fa-4x"></i>
                                <h3 class="m-xs">Cars</h3>
                                <p class="visible-lg">&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Bikes">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-motorcycle fa-4x"></i>
                                <h3 class="m-xs">Bikes</h3>
                                <p class="visible-lg">&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Commerical-Vehicles">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-truck fa-4x"></i>
                                <h3 class="m-xs">Commerical Vehicles</h3>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="vehicles-spare-parts">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-sitemap fa-4x"></i>
                                <h3 class="m-xs">Vehicles Spare parts</h3>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Other-Vehicles">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-ship fa-4x"></i>
                                <h3 class="m-xs">Other Vehicles</h3>
                                <p class="visible-lg">&nbsp;</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-2 col-sm-4 col-xs-6">
                    <a href="/Vehicles-for-rent">
                        <div class="widget navy-bg p-lg text-center">
                            <div class="m-b-md">
                                <i class="fa fa-money fa-4x"></i>
                                <h3 class="m-xs">Vehicles for rent</h3>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="row"></div>
        <br /><br /><br /><br />
    </div>
    
</div>

@*<div class="wrapper wrapper-content animated fadeInUp">
   
</div>*@

@*<section id="categories" class="container features">
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">


            <h4 class="text-center m">
               Mobiles
            </h4>


            <div >
                <span id="gallery" data-gallery=""
                      data-bind="slick: showAds,
    slickOptions: { slidesToShow: 3,
  slidesToScroll: 1,
  autoplay: true,
  autoplaySpeed: 2000,},
    slickIndex: imageIndex">
                </span>
                <div class="">
                    <div class="ibox-content product-box">

                        <h2>Slide 1</h2>
                        <p>
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                            unknown printer took a galley of type and scrambled it to make a type specimen
                            book. It has survived not only five centuries, but also the leap.
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">


            <h4 class="text-center m">
                Laptops
            </h4>



            <div class="slick_demo_2">
               
                
            </div>
        </div>
    </div>*@
    @*<div class="row">
        <div class="col-lg-10 col-lg-offset-1">


            <h4 class="text-center m">
                Services
            </h4>



            <div class="slick_demo_2">

                <div>
                    <div class="ibox-content">
                        <h2>Slide 1</h2>
                        <p>
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                            unknown printer took a galley of type and scrambled it to make a type specimen
                            book. It has survived not only five centuries, but also the leap.
                        </p>
                    </div>
                </div>
                <div>
                    <div class="ibox-content">
                        <h2>Slide 2</h2>
                        <p>
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                            unknown printer took a galley of type and scrambled it to make a type specimen
                            book. It has survived not only five centuries, but also the leap.
                        </p>
                    </div>
                </div>
                <div>
                    <div class="ibox-content">
                        <h2>Slide 3</h2>
                        <p>
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                            unknown printer took a galley of type and scrambled it to make a type specimen
                            book. It has survived not only five centuries, but also the leap.
                        </p>
                    </div>
                </div>
                <div>
                    <div class="ibox-content">
                        <h2>Slide 4</h2>
                        <p>
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                            unknown printer took a galley of type and scrambled it to make a type specimen
                            book. It has survived not only five centuries, but also the leap.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>*@
    
@*</section>*@
<div class="row">
    <br /><br /><br /><br />
</div>

<div class="row">
    <div class="col-lg-10 col-lg-offset-1">

        <div class="slick_demo_2 showAds" data-bind="foreach:showAds">

            <div>
                <div class="ibox">
                    <div class="ibox-content product-box">

                        <div class="product-imitation">
                            <div class="carouselContainer">
                                <span id="gallery" data-gallery=""
                                                                            data-bind="slick: images,
                                      slickOptions: { slidesToShow: 3,
                                    slidesToScroll: 1,
                                    autoplay: true,
                                    autoplaySpeed: 2000,},
                                      slickIndex: imageIndex">
                                                                      </span>
                                <div data-bind="visible:images().length == 0"><h2><br /><br /><br /><br /> No Images<br /><br /><br /><br /><br /></h2></div>
                            </div>
                        </div>
                        <div class="product-desc">
                            <span class="product-price">
                                <span data-bind="if:!isBidingAllowed">
                                    <span data-bind="if:price">
                                        <span data-bind="text:price"></span> <small style="font-size:13px" class="text-muted">Rs. <span data-bind="html:isNegotiable"></span></small>
                                    </span>
                                    <span data-bind="if:!price">Price on contact</span>
                                </span>
                                <span data-bind="if:isBidingAllowed">
                                    <span data-bind="if:price">
                                        <span data-bind="if:highestBid() == '-Infinity'">
                                            <span data-bind="text:price"></span> <small style="font-size:13px" class="text-muted ">Rs. (Initial Bid) </small>
                                        </span>
                                        <span data-bind="ifnot:highestBid() == '-Infinity'">
                                            <span data-bind="text:highestBid"></span> <small style="font-size:13px" class="text-muted ">Rs. (current Bid) </small>
                                        </span>
                                    </span>
                                    <span data-bind="if:!price">
                                        <span data-bind="if:highestBid() == '-Infinity'">
                                            No Bit yet
                                        </span>
                                        <span data-bind="ifnot:highestBid() == '-Infinity'">
                                            <span data-bind="text:highestBid"></span> <small style="font-size:13px" class="text-muted ">Rs. (current Bid) </small>
                                        </span>
                                    </span>
                                </span>
                            </span>
                            <small class="text-muted">Mobile</small>
                            <a href="#" class="product-name" data-bind="text:title,attr:{href:link}"> </a>



                            <div class="small m-t-xs" data-bind="foreach:showTags">
                                <a target="_blank" data-bind="attr:{href:'/Tag/'+name}"> <span class="btn btn-xs btn-white" data-bind="text:name"></span></a>
                            </div>
                            <div class="m-t text-righ">

                                <a href="#" class="btn btn-xs btn-outline btn-primary">Info <i class="fa fa-long-arrow-right"></i> </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .slick_demo_2 .ibox-content {
        margin: 0 10px;
    }
</style>
<style>
    .carouselContainer {
        overflow: hidden;
        //height:350px;
        margin: 0px;
        padding: 0px;
    }

    #gallery {
        margin: 0px;
        padding: 0px;
    }

    .product-imitation {
        margin: 0px;
        padding: 0px;
      //   width:250px !important;
        /apply max-padding or default image;
    }

    .carouselContainer img {
        // height: 350px;
        width: 250px;
        height: 250px;
       // overflow:hidden;
    }

    .showAds .ibox {
      //  height: 350px;
      //  width:259px;
    }
</style>

<section id="contact" class="gray-section contact">
    <div class="container">
        <div class="row m-b-lg">
            <div class="col-lg-12 text-center">
                <div class="navy-line"> </div>
                <h1>Contact Us</h1>
                <p>Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod.</p>
            </div>
        </div>
        <div class="row m-b-lg">
            <div class="col-lg-3 col-lg-offset-3">
                <address>
                    <strong><span class="navy">Company name, Inc.</span></strong><br />
                    795 Folsom Ave, Suite 600<br />
                    San Francisco, CA 94107<br />
                    <abbr title="Phone">P:</abbr> (123) 456-7890
                </address>
            </div>
            <div class="col-lg-4">
                <p class="text-color">
                    Consectetur adipisicing elit. Aut eaque, totam corporis laboriosam veritatis quis ad perspiciatis, totam corporis laboriosam veritatis, consectetur adipisicing elit quos non quis ad perspiciatis, totam corporis ea,
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 text-center">
                <a href="mailto:test@email.com" class="btn btn-primary">Send us mail</a>
                <p class="m-t-sm">
                    Or follow us on social platform
                </p>
                <ul class="list-inline social-icon">
                    <li>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-linkedin"></i></a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 text-center m-t-lg m-b-lg">
                <p><strong>&copy; 2015 Company Name</strong><br /> consectetur adipisicing elit. Aut eaque, laboriosam veritatis, quos non quis ad perspiciatis, totam corporis ea, alias ut unde.</p>
            </div>
        </div>
    </div>
</section>

@section Styles {
    @Styles.Render("~/plugins/slickStyles")
    @Styles.Render("~/plugins/slickThemeStyles")
    @Styles.Render("~/plugins/toastrStyles")
@Styles.Render("~/bundles/tagStyles")
}


@section Scripts{
    @Scripts.Render("~/plugins/timeago")
    @Scripts.Render("~/plugins/autosize")
    @Scripts.Render("~/plugins/slick")
<script src="~/Scripts/app/slick-knockout-binding.js"></script>
<script src="~/Scripts/app/CreateAlert.js"></script>
<script src="~/Scripts/app/_AdListView.js"></script>
<script src="~/Scripts/app/_Truncate-knockout-binding.js"></script>
<script src="~/Scripts/app/GetLoginUserId.js"></script>
    <script>
        function slick1() {
            $('.slick_demo_2').slick({
                infinite: true,
                slidesToShow: 3,
                slidesToScroll: 1,
                centerMode: true,
                focus: false,
                responsive: [
                    {
                        breakpoint: 1624, //1024
                        settings: {
                            slidesToShow: 4,
                            slidesToScroll: 3,
                            infinite: true,
                            // dots: true
                        }
                    },
                    {
                        breakpoint: 1024, //1024
                        settings: {
                            slidesToShow: 3,
                            slidesToScroll: 3,
                            infinite: true,
                           // dots: true
                        }
                    },
                    {
                        breakpoint: 680, //600
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2
                        }
                    },
                    {
                        breakpoint: 440, //480
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                ]
            });
        }
        
        function ViewModel() {
            
        SearchingLocation();
            AccountViewModel();
            ChatViewModel();
            var self = this;
            self.showAds = ko.observableArray();
            self.selectedTag = ko.observable();
            self.isPageLoading = ko.observable(false);
            self.selectedTag.subscribe(function () {
                self.isPageLoading(true);
                $.cookie("selectedTag", self.selectedTag(), { path: '/Search' });
                window.location.href = "/Search";
            })
            self.loadad = function () {
                url_address = '/api/Search/GetTrendingAds';
                $.ajax({
                    url: url_address,
                    dataType: "json",
                    contentType: "application/json",
                    cache: false,
                    type: 'GET',
                    success: function (data) {
                        var mappedads = $.map(data, function (item) { return new Ad(item); });
                        self.showAds(mappedads);
                        //remove from this
                        $.ajax({
                            url : url_address,
                            dataType: "json",
                            contentType: "application/json",
                            cache: false,
                            type: 'GET',
                            success: function (data) {
                                slick1();
                            },
                            error: function () {
                                toastr.error("failed to search. Please refresh page and try again", "Error!");
                            }
                        });
                        //to this
                    },
                    error: function () {
                        toastr.error("Unable to load data. Please try again", "Error");
                    }
                });
            }
            self.loadad();
        }
        function getTimeAgo(varDate) {
            if (varDate) {
                return $.timeago(varDate.toString().slice(-1) == 'Z' ? varDate : varDate + 'Z');
            }
            else {
                return '';
            }
        }
        //ko.bindingHandlers.slick = (function () {
        //    var createImageDiv = function (imgUrl) {

        //        $a = $('<a>');
        //        $a.attr('href', imgUrl);
        //        //$a.attr('data-gallery', '#blueimp-gallery');
        //        $a.attr('target', '_blank');
        //        $div = $('<div>');
        //        $image = $('<img>');
        //        $image.attr('src', imgUrl);
        //        // $div.append($image);
        //        $a.append($image);
        //        $div.append($a);
        //        return $div;
        //    };

        //    // Initializes the carousel
        //    var init = function (element, valueAccessor, allBindingsAccessor) {
        //        // Clears the div
        //        $(element).empty();
        //        // Creates the inner divs with images
        //        var images = ko.unwrap(valueAccessor());
        //        if (images) {
        //            images.forEach(function (imgUrl) {
        //                $(element).append(createImageDiv(imgUrl));
        //            });
        //        }

        //        // try to recover slickOptions
        //        var options = allBindingsAccessor().slickOptions || {};

        //        // Initialize slick on the div, with provided options
        //        $(element).slick(options);

        //        //handle disposal, if KO removes the element
        //        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        //            $(element).slick('unslick');
        //        });

        //        // check if there is slickIndex
        //        var slickIndex = allBindingsAccessor().slickIndex;
        //        if (slickIndex) {
        //            $(element).slick('slickGoTo', ko.unwrap(slickIndex));
        //        }
        //        // If it's obervable, subscribe to its changes
        //        if (ko.isObservable(slickIndex)) {
        //            slickIndex.subscribe(function (idx) {
        //                $(element).slick('slickGoTo', idx);
        //            });
        //        }
        //        // It if's writable observable, update when slick current index changes
        //        if (ko.isWritableObservable(slickIndex)) {
        //            $(element).on('afterChange', function (evt, slick, pos) {
        //                slickIndex(pos);
        //            })
        //        }

        //        // Check if the array of images is an observable array
        //        var imagesArray = valueAccessor();
        //        // If it's observable array, subscribe to changes
        //        if (ko.isObservable(imagesArray) && 'destroyAll' in imagesArray) {
        //            imagesArray.subscribe(function (changes) {
        //                console.log(changes);
        //                if (changes) {
        //                    changes.forEach(function (change) {
        //                        if (change.status == 'added') {
        //                            // Add new img div at index
        //                            var imgDiv = createImageDiv(change.value)[0];
        //                            var index = change.index;
        //                            var slideCount = $(element).slick('getSlick').slideCount;
        //                            // if the index is out of range (which can happen
        //                            // with push, and splice), include at the end
        //                            var addBefore = true;
        //                            if (index >= slideCount) {
        //                                index = slideCount - 1;
        //                                addBefore = false;
        //                            }
        //                            $(element).slick('slickAdd', imgDiv, index, addBefore);
        //                        } else if (change.status == 'deleted') {
        //                            // delete img div at index
        //                            $(element).slick('slickRemove', change.index);
        //                        }
        //                    });
        //                }
        //            }, null, 'arrayChange');
        //        } // if observable array
        //    }

        //    //update the control when the view model changes
        //    var update = function (element, valueAccessor) {
        //        var images = ko.unwrap(valueAccessor());
        //        // Do something to update the content
        //        console.log('update');
        //    }

        //    return { init: init, update: update };
        //})();
        $('#select-tag').selectize({
            valueField: 'name',
            labelField: 'name',
            searchField: 'name',
            options: [],
            maxItems: 4,
            render: {
                option: function (item, escape) {
                    return '<div>' +
                        '<span class="title">' +
                            '<span class="name">' + escape(item.name) + '</span>' +

                        '</span>' +
                        '<span class="description">' + escape(item.info) + '</span>' +
                        '<ul class="meta">' +
                            '<li class="watchers"><span>' + escape(item.followers) + '</span> followers</li>' +
                            '<li class="forks"><span>' + escape(item.questions) + '</span> times Used</li>' +
                        '</ul>' +
                    '</div>';
                }
            },
            load: function (query, callback) {
                if (!query.length) return callback();
                $.ajax({
                    url: '/api/Tag/SearchTags?s=' + encodeURIComponent(query),
                    type: 'GET',
                    error: function () {
                        callback();
                    },
                    success: function (res) {
                        callback(res.slice(0, 10));
                    }
                });
            }
        });
        $("#FirstLoading").css({ "display": "block" });
        $(document).ready(function () {

            toastr.options = {
                closeButton: true,
                progressBar: true,
                preventDuplicates: true,
                positionClass: 'toast-top-right',
                onclick: null
            };
            ko.applyBindings(new ViewModel);
            $.connection.hub.start().done();
            
        })

    </script>
}




